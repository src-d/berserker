# Berserker

Repository data collection pipeline:
 - reading the output of [Borges](https://github.com/src-d/borges) and transform every fgile to UAST though [Bblfsh](https://github.com/bblfsh/server)
 - producing the .parquet tables for Repositories, Files, UASTs.


## Arhitecture

It consists of a single Apache Spark job in Scala that:
 - iterates over .siva files without use of repository metadata DB
 - uses gRPC interface to `enrysrv` to detect language for every file
 - uses gRPC interface to [bblfsh/server](https://github.com/bblfsh/server) to get UASTs



### Enry server
 - `model.go` contain main interface and service definition
 - [proteus](https://github.com/src-d/proteus/) used to generate a Protobuf IDL `.proto` files, checked-in under `proto/`
 - `server.proteus.go` and  `generated.pb.go` contain Go code, generated by `protoc`
 - build by `glide install` + `make build`


### Extractor2
 - All code under `./extractor2`
 - build by `./sbt package`
